#!/bin/bash
#
# kill polybar instances then start a new one

killall -q polybar

# Wait until the processes have been shut down
while pgrep -u $UID -x polybar >/dev/null; do sleep 1; done

# check if i3 or bspwm are running and launch relevant polybar config
if pgrep -x "i3" > /dev/null
then
    polybar i3 >>/tmp/polybar.log 2>&1 &
fi

if pgrep -x "bspwm" > /dev/null
then
    polybar bspwm  >>/tmp/polybar.log 2>&1 &
fi
