#!/bin/bash
#
# when we start wm also start...

session="${SESSION}"

# if we're in an Xorg session
if pgrep -x "Xorg" > /dev/null; then
   # start compositor if not cinnamon
   if [[ "$session" != "mint" && "$session" != "cinnamon" ]]; then
       # -b daemon, -i no inactive opacity, -I no fading in or -O out
       picom -b -i 1 -I 1 -O 1 &
   fi

   if [[ "$session" == "xfce" ]]; then
       plank &
   fi
   setxkbmap -layout us,ir -option grp:alt_shift_toggle & # set keyboards
   xautolock -time 30 -locker slock &  # autolock screen after half an hour
   xset r rate 300 50 &                # faster repeating keys
   start-pulseaudio-x11 &              # pulseaudio, should be automatic
   dunst &         # notifications
   clipmenud &     # clipmenu daemon
   unclutter &     # get rid of mouse
   nm-applet &     # no wayland support yet

# wayland
else
    mako &  #  dunst replacement for wayland

fi

nmcli connection up client &        # connect to vpn on login
transmission-daemon &               # transmission in background
emacs --daemon=term &               # terminal emacs daemon
emacs --daemon=gui &                # gui emacs daemon
redshift &      # reduce bluelight
lxpolkit &      # authentication agent
setbg &         # set background
volctl &
# blueman-applet &
# monerod &       # start the monero daemon
# monero_mine &   # mine monero
